import React from 'react'
import store from '../../store'
import { Typography, Button, Grid, Paper } from '@material-ui/core';
import MetinClientMap from '../../components/MetinClientMap/MetinClientMap';
import MetinClientLeftSide from '../../components/login-register-desc/MetinClientLeftSide/MetinClientLeftSide';

class MetinClient extends React.Component {
    constructor(props){
        super(props)
        this.SocketToLocalServer = this.props.socket
        this.state = {
            interval: setInterval(() => {
                this.getFullHackStatus();
                this.getFullCharacterStatus();
                this.getFullInstancesList();
              }, 50),
            }
    }

    getFullCharacterStatus = () => {
        let index = store.getState().receivePacketesReducer.selected_client_id
        store.dispatch({type: 'GET_FULL_CHARACTER_STATUS', client: this.SocketToLocalServer, index: index})

        
    }

    getFullInstancesList = () => {
        let index = store.getState().receivePacketesReducer.selected_client_id
        store.dispatch({type: 'GET_FULL_INSTANCES_LIST', client: this.SocketToLocalServer, index: index})
    }

    getFullHackStatus = () => {
        let index = store.getState().receivePacketesReducer.selected_client_id
        store.dispatch({type: 'GET_FULL_HACK_STATUS', client: this.SocketToLocalServer, index: index})      
    }

    render = () => {

        return (
            <Grid container>
                <Grid item md={3}>
                    <MetinClientLeftSide socket={this.SocketToLocalServer}/>
                </Grid>
                <Grid item md={6}>
                    <MetinClientMap socket={this.SocketToLocalServer}/>
                </Grid>
                <Grid item md={3}>
                    PRAWY PANEL
                </Grid>


            </Grid>

            
            )
        }
}

export default MetinClient