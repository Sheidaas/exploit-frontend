import React from 'react'
import { Link } from 'react-router-dom'
import { AppBar, Typography, Toolbar, Button, Grid } from '@material-ui/core';
import './MenuBar.css'
import store from '../../store.js'
import { connect } from 'react-redux';


class MenuBar extends React.Component {
    constructor(props) { 
        super(props)
    }

    render () {
      if(!this.props.apiKey)
      {
        return ( 
          <AppBar position="static">
              <Toolbar>
              <div className='bar-option'>
              <Link to='/'> 
                <Button variant='outlined' className='bar-option'>
                <Typography variant="h6" className='bar-option-title'>
                      OpenBot
                </Typography>
              </Button>
              </Link>
              </div>
              <div className='bar-option'>
              <Link to='/login'> 
              <Button variant='outlined' className='bar-option'>
                      <Typography variant="h6" className='bar-option-title'> Login </Typography>
              </Button>
              </Link>

              </div>
              <div className='bar-option'>
              <Link to='/signup'> 
              <Button variant='outlined' className='bar-option'>
                      <Typography variant="h6" className='bar-option-title'> Sign up </Typography>
              </Button>
              </Link>
              </div>
            </Toolbar>
      
          </AppBar>
          )
      }
      else{
        let client_option = <> </>
        if(this.props.selected_client_id >-1){
          client_option = 
          <>
          <div className='bar-option'>
          <Link to='/client'> 
              <Button variant='outlined' className='bar-option'>
              <Typography variant="h6" className='bar-option-title'>
                    Client
              </Typography>
            </Button>
          </Link>
          </div>
          </>
        }

        return (
          <AppBar position="static">
          <Toolbar>
          <div className='bar-option'>
          <Link to='/'> 
            <Button variant='outlined' className='bar-option'>
            <Typography variant="h6" className='bar-option-title'>
                  OpenBot
            </Typography>
          </Button>
          </Link>
          </div>
          <div className='bar-option'>
          <Link to='/dashboard'> 
          <Button variant='outlined' className='bar-option'>
                  <Typography variant="h6" className='bar-option-title'> Dashboard </Typography>
          </Button>
          </Link>
          </div>
          { client_option }
          <div className='bar-option'>
          <Link to='/logout'> 
          <Button variant='outlined' className='bar-option'>
                  <Typography variant="h6" className='bar-option-title'> Logout </Typography>
          </Button>
          </Link>
          </div>
        </Toolbar>
  
      </AppBar>
        )
      }

        }
}
function mapStateToProps(state){
  //console.log(state)
  return {
    apiKey: state.userReducer.apiKey,
    selected_client_id: state.receivePacketesReducer.selected_client_id
  }
}
export default connect (mapStateToProps)(MenuBar)
