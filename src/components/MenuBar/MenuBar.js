import React from 'react'
import { Link } from 'react-router-dom'
import { AppBar, Typography, Toolbar, Button, Link as mLink } from '@material-ui/core';
import './MenuBar.css'
import { HackbarAppBar } from '../hackbar_style/hackbar_style';
import { connect } from 'react-redux';
import auth from '../../utils/auth';


class MenuBar extends React.Component {
    constructor(props) { 
        super(props)
    }

    render () {

      let client_option = <> </>
      if(this.props.selected_client_id >-1){
        client_option = 
        <>
        <div className='bar-option'>
        <Link to='/client'> 
        <mLink>
            <Typography variant="h6" className='bar-option-title'>
              Client
            </Typography>
          </mLink>
        </Link>
        </div>
        </>
      }

      return ( 
        <HackbarAppBar position="static">
            <Toolbar>
            <div className='bar-option'>
            <Link to='/'> 
              <Button variant='outlined' className='bar-option'>
              <Typography variant="h6" className='bar-option-title'>
                    OpenBot
              </Typography>
            </Button>
            </Link>
            </div>
            {!this.props.apiKey &&
              <div className='bar-option'>
              <Link to='/login'> 
              <Button variant='outlined' className='bar-option'>
                      <Typography variant="h6" className='bar-option-title'> Login </Typography>
              </Button>
              </Link>

              </div>}
            {!this.props.apiKey &&
              <div className='bar-option'>
              <Link to='/signup'> 
              <Button variant='outlined' className='bar-option'>
                      <Typography variant="h6" className='bar-option-title'> Sign up </Typography>
              </Button>
              </Link>
              </div>}

              {this.props.apiKey && 
                <div className='bar-option'>
                <Link to='/dashboard'> 
                <mLink>
                    <Typography variant="h6" className='bar-option-title'>
                      Dashboard
                    </Typography>
                  </mLink>
                </Link>
                </div> }
                { client_option }
              {this.props.apiKey &&  
                <div className='bar-option'>
                <Link to='/logout'> 
                <mLink>
                    <Typography variant="h6" className='bar-option-title'>
                      Logout
                    </Typography>
                  </mLink>
                </Link>
                </div>}

          </Toolbar>
    
        </HackbarAppBar>
        )
    }
  }
function mapStateToProps(state){
  return {
    apiKey: auth.getUserInfo().apiKey,
    selected_client_id: state.receivePacketsReducer.selected_client_id
  }
}
export default connect (mapStateToProps)(MenuBar)
