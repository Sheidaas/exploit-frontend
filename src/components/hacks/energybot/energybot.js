import { Grid, Typography, FormControlLabel} from '@material-ui/core'
import { HackbarFormControlLabel, HackbarCheckbox, HackbarButton, HackbarTextField } from '../../hackbar_style/hackbar_style'
import React from 'react'
import store from '../../../store'
import { ACTIONS } from '../../../utils/enums'

class EnergyBot extends React.Component{
    constructor(props){
        super(props)
        this.state = {
            OPTIONS: {Repeats: 1},
            NEEDED_OPTIONS: {}
        }
    }

    onStart = () => {
        store.dispatch({type:ACTIONS.SET_NEW_SCHEMA, payload:{message: this.state, name: 'EnergyBot'}, index:store.getState().receivePacketsReducer.selected_client_id, client: this.props.socket})
    }

    onStartExchangeFragments = () => {
        store.dispatch({type:ACTIONS.SET_NEW_SCHEMA, payload:{message: this.state, name: 'EnergyBotExchangeFragments'}, index:store.getState().receivePacketsReducer.selected_client_id, client: this.props.socket})
    }

    onChangeRepeats = (new_value) => {
        if(new_value < 1 || new_value > 99){
            return
        }
        this.setState({...this.state, Repeats: new_value})
    }

    render = () => {
        return (
            <Grid container>
                <Grid item xs={12}>
                    <Typography> <b>Energybot</b> is walking between weapon shop, where is buying daggers, then is going to alchemist where is exchanging items to energy fragments.</Typography>
                </Grid>
                <Grid item xs={12}>
                    <Typography> <b>Remember:</b> you need finish all quest from weapon seller and talk about energy with alchemist first</Typography>
                </Grid>
                <Grid item xs={12}>
                    <HackbarTextField helperText={'Number of repeats'} type='number' onKeyDown={e => e.stopPropagation()} value={this.state.OPTIONS.Repeats}  onChange={(e)=>this.onChangeRepeats(parseInt(e.target.value))}
                     defaultValue={this.state.Repeats} fullWidth={true} margin={'dense'}/>
                </Grid>
                <Grid item xs={6}>
                    <HackbarButton onClick={()=>this.onStart()} > Start </HackbarButton>
                </Grid>
                <Grid item xs={6}>
                    <HackbarButton onClick={()=>this.onStartExchangeFragments()} > Start and exchange fragments </HackbarButton>
                </Grid>
            </Grid>
        )
    }

}

export default EnergyBot