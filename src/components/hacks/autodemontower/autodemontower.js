import { Grid, Typography, FormControlLabel} from '@material-ui/core'
import { HackbarFormControlLabel, HackbarCheckbox, HackbarButton, HackbarTextField } from '../../hackbar_style/hackbar_style'
import React from 'react'
import store from '../../../store'
import { ACTIONS } from '../../../utils/enums'

class AutoDemonTower extends React.Component{
    constructor(props){
        super(props)
        this.state = {
            OPTIONS: {Repeats: 1},
            NEEDED_OPTIONS: {ITEMS_TO_UPGRADE: []}
        }
    }

    onStart = () => {
        store.dispatch({type:ACTIONS.SET_NEW_SCHEMA, payload:{message: this.state, name: 'DemonTower'}, index:store.getState().receivePacketsReducer.selected_client_id, client: this.props.socket})
    }

    onStartReaper= () => {
        store.dispatch({type:ACTIONS.SET_NEW_SCHEMA, payload:{message: this.state, name: 'DemonTowerRipper'}, index:store.getState().receivePacketsReducer.selected_client_id, client: this.props.socket})
    }

    onChangeRepeats = (new_value) => {
        if(new_value < 1 || new_value > 99){
            return
        }
        this.setState({...this.state, Repeats: new_value})
    }

    render = () => {
        return (
            <Grid container>
                <Grid item xs={12}>
                    <Typography> <b> {this.props.language.header} </b> </Typography>
                </Grid>
                <Grid item xs={12}>
                    <Typography> {this.props.language.description} </Typography>
                </Grid>
                <Grid item xs={12}>
                    <HackbarTextField helperText={this.props.language.repeats_helper_text} type='number' onKeyDown={e => e.stopPropagation()} value={this.state.OPTIONS.Repeats}  onChange={(e)=>this.onChangeRepeats(parseInt(e.target.value))}
                     defaultValue={this.state.Repeats} fullWidth={true} margin={'dense'}/>
                </Grid>
                <Grid item xs={6}>
                    <HackbarButton onClick={()=>this.onStart()} > {this.props.language.blacksmith} </HackbarButton>
                </Grid>
                <Grid item xs={6}>
                    <HackbarButton onClick={()=>this.onStartReaper()} > {this.props.language.reaper} </HackbarButton>
                </Grid>
            </Grid>
        )
    }

}

export default AutoDemonTower